# Topic List Thumbnails

ä¸€ä¸ªä¸º Discourse è®ºå›æ·»åŠ è¯é¢˜åˆ—è¡¨ç¼©ç•¥å›¾åŠŸèƒ½çš„ä¸»é¢˜ç»„ä»¶ã€‚æ”¯æŒå¤šç§æ˜¾ç¤ºæ¨¡å¼ï¼Œå¯æŒ‰ç±»åˆ«æˆ–æ ‡ç­¾è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ–¼ï¸ **å¤šç§æ˜¾ç¤ºæ¨¡å¼**ï¼šæ”¯æŒç½‘æ ¼ã€ç Œä½“ã€åˆ—è¡¨ã€åšå®¢æ ·å¼å’Œç²¾ç®€ç½‘æ ¼ç­‰å¤šç§å¸ƒå±€
- ğŸ¨ **çµæ´»é…ç½®**ï¼šå¯æŒ‰ç±»åˆ«æˆ–æ ‡ç­¾è®¾ç½®ä¸åŒçš„æ˜¾ç¤ºæ¨¡å¼
- ğŸ“± **ç§»åŠ¨ç«¯æ”¯æŒ**ï¼šæ”¯æŒåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¾ç¤ºç¼©ç•¥å›¾
- ğŸ”§ **é«˜åº¦å¯å®šåˆ¶**ï¼šä¸°å¯Œçš„è®¾ç½®é€‰é¡¹ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒåŒ…æ‹¬ä¸­æ–‡åœ¨å†…çš„å¤šç§è¯­è¨€

## æ˜¾ç¤ºæ¨¡å¼

### Gridï¼ˆç½‘æ ¼ï¼‰
æ ‡å‡†çš„ç½‘æ ¼å¸ƒå±€ï¼Œè¯é¢˜ä»¥å¡ç‰‡å½¢å¼æ•´é½æ’åˆ—ã€‚
   
### Masonryï¼ˆç Œä½“ï¼‰
ç€‘å¸ƒæµå¸ƒå±€ï¼Œæ ¹æ®å›¾ç‰‡é«˜åº¦è‡ªåŠ¨è°ƒæ•´ä½ç½®ï¼Œå……åˆ†åˆ©ç”¨ç©ºé—´ã€‚

### Listï¼ˆåˆ—è¡¨ï¼‰
ä¼ ç»Ÿçš„åˆ—è¡¨è§†å›¾ï¼Œç¼©ç•¥å›¾æ˜¾ç¤ºåœ¨è¯é¢˜æ ‡é¢˜å·¦ä¾§ã€‚

### Blog Styleï¼ˆåšå®¢æ ·å¼ï¼‰
ç±»ä¼¼åšå®¢çš„å±•ç¤ºæ–¹å¼ï¼Œæ”¯æŒè¯é¢˜æ‘˜è¦æ˜¾ç¤ºã€‚

### Minimal Gridï¼ˆç²¾ç®€ç½‘æ ¼ï¼‰
ç²¾ç®€ç‰ˆç½‘æ ¼å¸ƒå±€ï¼Œæ˜¾ç¤ºç‚¹èµæ•°ç­‰é¢å¤–ä¿¡æ¯ã€‚

## ç³»ç»Ÿè¦æ±‚

- Discourse ç‰ˆæœ¬ï¼š2.5.0.beta4 æˆ–æ›´é«˜
- Node.jsï¼š>= 22
- åŒ…ç®¡ç†å™¨ï¼špnpm 9.x

## å®‰è£…

1. åœ¨ Discourse ç®¡ç†åå°ï¼Œè¿›å…¥ **è‡ªå®šä¹‰** > **ä¸»é¢˜**
2. ç‚¹å‡» **å®‰è£…ä¸»é¢˜ç»„ä»¶**
3. é€‰æ‹© **ä» Git ä»“åº“å®‰è£…**
4. è¾“å…¥æ­¤ä»“åº“çš„ URL
5. ç‚¹å‡» **å®‰è£…**

## é…ç½®

### åŸºæœ¬è®¾ç½®

- **é»˜è®¤ç¼©ç•¥å›¾æ¨¡å¼** (`default_thumbnail_mode`)ï¼šè®¾ç½®é»˜è®¤çš„æ˜¾ç¤ºæ¨¡å¼ï¼ˆé»˜è®¤ï¼šgridï¼‰
- **ç§»åŠ¨ç«¯ç¼©ç•¥å›¾** (`mobile_thumbnails`)ï¼šæ˜¯å¦åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå¯ç”¨ç¼©ç•¥å›¾ï¼ˆé»˜è®¤ï¼štrueï¼‰
- **å ä½ç¬¦å›¾æ ‡** (`placeholder_icon`)ï¼šæ²¡æœ‰ç¼©ç•¥å›¾çš„è¯é¢˜æ˜¾ç¤ºçš„å›¾æ ‡ï¼ˆé»˜è®¤ï¼šcommentsï¼‰

### æŒ‰ç±»åˆ«é…ç½®

å¯ä»¥ä¸ºä¸åŒçš„ç±»åˆ«è®¾ç½®ä¸åŒçš„æ˜¾ç¤ºæ¨¡å¼ï¼š

- `blog_style_categories`ï¼šä½¿ç”¨åšå®¢æ ·å¼è§†å›¾çš„ç±»åˆ«
- `minimal_grid_categories`ï¼šä½¿ç”¨ç²¾ç®€ç½‘æ ¼è§†å›¾çš„ç±»åˆ«
- `grid_categories`ï¼šä½¿ç”¨ç½‘æ ¼è§†å›¾çš„ç±»åˆ«
- `masonry_categories`ï¼šä½¿ç”¨ç Œä½“è§†å›¾çš„ç±»åˆ«
- `list_categories`ï¼šä½¿ç”¨åˆ—è¡¨è§†å›¾çš„ç±»åˆ«

### æŒ‰æ ‡ç­¾é…ç½®

åŒæ ·å¯ä»¥ä¸ºä¸åŒçš„æ ‡ç­¾è®¾ç½®æ˜¾ç¤ºæ¨¡å¼ï¼š

- `blog_style_tags`ï¼šä½¿ç”¨åšå®¢æ ·å¼è§†å›¾çš„æ ‡ç­¾
- `minimal_grid_tags`ï¼šä½¿ç”¨ç²¾ç®€ç½‘æ ¼è§†å›¾çš„æ ‡ç­¾
- `grid_tags`ï¼šä½¿ç”¨ç½‘æ ¼è§†å›¾çš„æ ‡ç­¾
- `masonry_tags`ï¼šä½¿ç”¨ç Œä½“è§†å›¾çš„æ ‡ç­¾
- `list_tags`ï¼šä½¿ç”¨åˆ—è¡¨è§†å›¾çš„æ ‡ç­¾

### å…¶ä»–è®¾ç½®

- **æ–‡æ¡£ç¼©ç•¥å›¾æ¨¡å¼** (`docs_thumbnail_mode`)ï¼šå¦‚æœå¯ç”¨äº†æ–‡æ¡£æ’ä»¶ï¼Œè®¾ç½®æ–‡æ¡£è¯é¢˜çš„æ˜¾ç¤ºæ¨¡å¼ï¼ˆé»˜è®¤ï¼šnoneï¼‰
- **å»ºè®®è¯é¢˜æ¨¡å¼** (`suggested_topics_mode`)ï¼šè®¾ç½®å»ºè®®è¯é¢˜çš„æ˜¾ç¤ºæ¨¡å¼
- **å¯ç”¨éè¯é¢˜åˆ—è¡¨é¡µé¢** (`enable_outside_topic_lists`)ï¼šåœ¨éè¯é¢˜åˆ—è¡¨é¡µé¢ï¼ˆå¦‚ç”¨æˆ·æ´»åŠ¨ã€ä¸ªäººæ¶ˆæ¯ç­‰ï¼‰å¯ç”¨ç¼©ç•¥å›¾ï¼ˆé»˜è®¤ï¼šfalseï¼‰
- **åˆ—è¡¨ç¼©ç•¥å›¾å¤§å°** (`list_thumbnail_size`)ï¼šåˆ—è¡¨è§†å›¾ä¸­ç¼©ç•¥å›¾çš„åŸºæœ¬å¤§å°ï¼ˆ200 æˆ– 400ï¼Œé»˜è®¤ï¼š200ï¼‰

## å¼€å‘

### ç¯å¢ƒè®¾ç½®

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å®‰è£… Ruby ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
bundle install
```

### é¡¹ç›®ç»“æ„

```
discourse-topic-thumbnails/
â”œâ”€â”€ about.json              # ä¸»é¢˜å…ƒæ•°æ®
â”œâ”€â”€ settings.yml            # ä¸»é¢˜è®¾ç½®å®šä¹‰
â”œâ”€â”€ common/                 # å…¬å…±æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ common.scss
â”œâ”€â”€ javascripts/           # JavaScript ä»£ç 
â”‚   â””â”€â”€ discourse/
â”‚       â”œâ”€â”€ components/    # Ember ç»„ä»¶
â”‚       â”œâ”€â”€ connectors/    # è¿æ¥å™¨
â”‚       â”œâ”€â”€ initializers/ # åˆå§‹åŒ–å™¨
â”‚       â”œâ”€â”€ lib/          # å·¥å…·åº“
â”‚       â””â”€â”€ services/     # æœåŠ¡
â”œâ”€â”€ locales/               # å¤šè¯­è¨€ç¿»è¯‘æ–‡ä»¶
â”œâ”€â”€ mobile/               # ç§»åŠ¨ç«¯ç‰¹å®šæ–‡ä»¶
â”œâ”€â”€ spec/                 # Ruby æµ‹è¯•
â””â”€â”€ test/                 # JavaScript æµ‹è¯•
```

### æ ¸å¿ƒæ–‡ä»¶

- `javascripts/discourse/services/topic-thumbnails.js`ï¼šæ ¸å¿ƒæœåŠ¡ï¼Œå¤„ç†æ˜¾ç¤ºæ¨¡å¼é€»è¾‘
- `javascripts/discourse/lib/masonry-calculator.js`ï¼šç Œä½“å¸ƒå±€è®¡ç®—å™¨
- `common/common.scss`ï¼šä¸»è¦æ ·å¼æ–‡ä»¶

### ä»£ç è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ä»¥ä¸‹å·¥å…·è¿›è¡Œä»£ç æ£€æŸ¥ï¼š

- ESLintï¼ˆJavaScriptï¼‰
- Stylelintï¼ˆCSS/SCSSï¼‰
- RuboCopï¼ˆRubyï¼‰

è¿è¡Œæ£€æŸ¥ï¼š

```bash
pnpm run lint
```

## æµ‹è¯•

é¡¹ç›®åŒ…å«è‡ªåŠ¨åŒ–æµ‹è¯•ï¼š

- JavaScript æµ‹è¯•ï¼šä½¿ç”¨ QUnit
- Ruby æµ‹è¯•ï¼šä½¿ç”¨ RSpec

è¿è¡Œæµ‹è¯•ï¼š

```bash
# JavaScript æµ‹è¯•
pnpm test

# Ruby æµ‹è¯•
bundle exec rspec
```

## è®¸å¯è¯

MIT License

Copyright (c) Civilized Discourse Construction Kit, Inc.

## ä½œè€…

David Taylor

## ç›¸å…³é“¾æ¥

- [Discourse ä¸»é¢˜è®¨è®º](https://meta.discourse.org/t/topic-list-thumbnails/150602)
- [Discourse ä¸»é¢˜å¼€å‘æ–‡æ¡£](https://meta.discourse.org/t/beginners-guide-to-using-theme-components/102480)

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ Git æäº¤å†å²äº†è§£è¯¦ç»†çš„æ›´æ–°è®°å½•ã€‚

